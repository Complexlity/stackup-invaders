<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      [x-cloak] { display: none !important; }
    </style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@imtbl/sdk@0.34.0"></script>
    <script type="module" src="passport.js"></script>
    <script type="module" src="login.js"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="libs/p5.min.js"></script>
    <script src="libs/p5.dom.min.js"></script>
    <script src="Alien.js" type="application/javascript"></script>
    <script src="Invaders.js" type="application/javascript"></script>
  <script src="Player.js" type="application/javascript"></script>
  <script src="Bullet.js" type="application/javascript"></script>
  <script src="PlayerBullet.js" type="application/javascript"></script>
  <script src="AlienBullet.js" type="application/javascript"></script>
  <script src="Debris.js" type="application/javascript"></script>
  <script src="sketch.js" type="application/javascript" defer></script>
  </head>
  <body
  class="prose"
    x-data='{
    user: "",
    loadingUser: false,
    playing: false
  }'
    x-init="
window.passport.loginCallback()
"
@notconnected="
console.log('user is not connected')
window.gameIsNotOn = true
 playing=false
"
    style="background-image: url('bg.png')"
  >
    <header class="flex items-center justify-between px-4 py-2 text-white">
      <h1 class="text-2xl font-bold">Game Channel</h1>
      <!-- <button
      @click="playing=!playing">Trigger Playing</button> -->
      <div
      x-cloak
      x-show="!user"
        class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border bg-background hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 text-white border-white"
        :class="loadingUser ? 'disabled text-gray-500 px-2' : ''"
      >
        <svg
        x-show="loadingUser"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="mr-2 h-8 w-8 animate-spin"
        x-cloak
        >

        <path d="M21 12a9 9 0 1 1-6.219-8.56" />
        </svg>
        <button
        x-cloak
          x-show="!user"
          @click="
        loadingUser = true
        await connectPassport()
        user = window.userProfile
        loadingUser = false

        "
          :class="loadingUser ? 'disabled' : ''"
          x-text="loadingUser ? 'Connecting...' : 'Connect Wallet'"
        >Connect Wallet</button>
      </div>
      <div
      x-cloak
      x-show="user"
        class="py-2 text-white flex gap-4"
      >
      <p
      class="text-white-800 font-xl text-xl  px-4 py-2 bg-purple-800"
      x-text="user.email"></p>
      <p
      x-data="{
        loggingOut: false
      }"
      x-cloak
      x-show="user"
      @click="
      loggingOut=true
      await window.passport.logout()
      window.userProfile=''
      user = ''
      playing = ''
      window.gameIsStarted = false
      window.gameIsNotOne = false
      loggingOut=false
      "

      class="hover:bg-red-400 cursor-pointer text-white font-xl text-xl  px-4 py-2 bg-red-600 rounded-xl flex gap-2"
      :class="loggingOut ? 'disabled' : ''"
      >
      <svg
        x-show="loggingOut"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="mr-2 h-8 w-8 animate-spin"
        x-cloak
        ><path d="M21 12a9 9 0 1 1-6.219-8.56" />
        </svg>
      <span x-text="loggingOut ? 'Logging Out...' : 'Log Out'"></span>
    </p>
      <p
      x-cloak
      x-show="playing"
      class="text-white font-xl text-xl  px-4 py-2 bg-purple-800 rounded-xl"
      >Score: <span x-text="window.score"></span></p>
    </div>
    </header>

    <section
    x-show="!playing"
    x-cloak
      class="h-[calc(100vh-40px)] w-full max-w-[150ch] mx-auto py-4 text-white grid items-center gap-8"
    >
      <div class="container px-4 md:px-6">
        <div
          class="flex flex-col md:flex-row items-center md:space-x-4 space-y-4 md:space-y-0 text-center md:text-left"
        >
          <div class="space-y-2">
            <h1
              class="text-4xl text-center font-bold tracking-tighter sm:text-5xl md:text-6xl lg:text-7xl bg-clip-text text-transparent bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"
            >
              Welcome to Game Channel
            </h1>
          </div>
          <div class="rounded-md w-4/5 lg:w-1/2">
            <img
              src="hero.webp"
              alt="Game Channel Image"
              class="w-full h-full object-cover rounded-md"
              width="500"
              height="500"
              style="aspect-ratio: 500 / 500; object-fit: cover"
            />
          </div>
        </div>
      </div>

      <!-- Play now button -->
      <div class="space-x-4 text-center">
        <div class="relative inline-flex group">
          <div
            class="absolute transitiona-all duration-1000 opacity-70 -inset-px bg-gradient-to-r from-[#44BCFF] via-[#FF44EC] to-[#FF675E] rounded-xl blur-lg group-hover:opacity-100 group-hover:-inset-1 group-hover:duration-200 animate-tilt"
          ></div>
          <button
            @click="
        if(!user){
          alert('Please connect your wallet first');
        }
        else {
          playing=true
          window.gameIsStarted = true
        }
        "
            href="#"
            title="Get quote now"
            class="relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-gray-900 font-pj rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"
            role="button"
          >
            Play Now
          </button>
        </div>
      </div>
    </section>
    <section
    x.cloak
    x.show="playing"
    >

<div
x-cloak
x-show="playing"
    class="container-fluid p-4">

      <div class="row">
        <div class="col-6">
          <div class="row">
            <div class="alert alert-primary" role="alert">
              Press the spacebar to shoot and arrows to move in all 4 directions!
            </div>
            <div class="card col-12 pt-2 pb-2 ">
              <div class="">
                <div
                x-cloak
                x-show="playing"
                id="sketch-holder">
                </div>

              </div>

            </div>

          </div>


        </div>
        <div class="col-6">
          <div id="nft">

          </div>
        </div>
      </div>
      <div class="row col-6 text-center flex justify-center my-4">
        <button

        class="start-button
        hover:bg-green-600 text-white font-xl text-xl px-4 py-2 bg-green-800 rounded-xl hidden">
        Start Game</button>
      </div>
    </div>

    </section>
  </body>


</html>
