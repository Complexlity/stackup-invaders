<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stackup Invaders</title>
    <style>
      [x-cloak] { display: none !important; }
    </style>
    <link rel="stylesheet" href="assets/css/styles.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@imtbl/sdk@0.34.0"></script>
    <script type="module" src="assets/js/passport.js"></script>
    <script type="module" src="assets/js/login.js"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <script src="libs/p5.min.js"></script>
    <script src="libs/p5.dom.min.js"></script>
    <script src="assets/js/Alien.js" type="application/javascript"></script>
    <script src="assets/js/Invaders.js" type="application/javascript"></script>
  <script src="assets/js/Player.js" type="application/javascript"></script>
  <script src="assets/js/Bullet.js" type="application/javascript"></script>
  <script src="assets/js/PlayerBullet.js" type="application/javascript"></script>
  <script src="assets/js/AlienBullet.js" type="application/javascript"></script>
  <script src="assets/js/Debris.js" type="application/javascript"></script>
  <script src="assets/js/sketch.js" type="application/javascript" defer></script>
  </head>
  <body
  class=""
    x-data='{
    highestScore: null,
    user: "",
    loadingUser: false,
    playing: false,
  }'
    x-init="
window.passport.loginCallback()
"
@notconnected="
window.gameIsNotOn = true
 playing=false
"
@gameover="
alert('Game Just Finished Baby')
const finalGameScore = window.finalGameScore
if(highestScore >= finalGameScore) return
console.log('I beat the highest score. Duh')
"

    style="background-image: url('assets/images/bg.png')"
  >
    <header class="container flex items-center justify-between px-4 py-2 text-white">
      <a href="https://github.com/Complexlity" target="_blank">
        <div class="w-12 h-12 m-1">
          <img alt="logo" src="assets/images/complex.png" class="w-full h-full object-cover">
        </div>
      </a>
     <button
        x-cloak
      x-show="!user"

      @click="
        loadingUser = true
        try {
          await connectPassport()
          user = window.userProfile
          highestScore = window.highestScore
          console.log({highestScore})

        }
        catch(err){
          console.log(err)
        }
        finally {
          loadingUser = false
        }
        "
:class="loadingUser ? 'disabled text-gray-500 px-2 !cursor-not-allowed' : 'text-white cursor-pointer'"
        class="flex items-center text-xl bg-blue-950 text-blue-400 !border !border-blue-400 !border-b-4 font-medium overflow-hidden relative px-4 py-2 !rounded-xl hover:brightness-150 hover:!border-t-4 hover:!border-b active:opacity-75 outline-none duration-300 group">
          <svg
        x-show="loadingUser"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="mr-2 h-8 w-8 animate-spin"
        x-cloak
        >

        <path d="M21 12a9 9 0 1 1-6.219-8.56" />
        </svg>
  <span

  class="bg-blue-400 shadow-blue-400 absolute -top-[150%] left-0 inline-flex w-80 h-[5px] rounded-md opacity-50 group-hover:top-[150%] duration-500 shadow-[0_0_10px_10px_rgba(0,0,0,0.3)]"></span>
<span
x-text="loadingUser ? 'Connecting...' : 'Connect Wallet'"
></span>
</button>
      </div>
      <div
      x-cloak
      x-show="user"
        class="py-2 text-white flex gap-4"
      >
      <p
      class="text-white-800 font-xl text-xl  px-4 py-2 bg-purple-800"
      x-text="user.email"></p>

    <button
              x-data="{
        loggingOut: false
      }"
      x-cloak
      x-show="user"
      @click="
      loggingOut=true
      await window.passport.logout()
      window.userProfile=''
      user = ''
      playing = ''
      window.gameIsStarted = false
      window.gameIsNotOne = false
      loggingOut=false
      "
:class="loggingOut ? 'disabled text-gray-500 px-2 !cursor-not-allowed' :
'text-white cursor-pointer'"

        class="flex items-center text-xl bg-red-950 text-white !border !border-red-400 !border-b-4 font-medium overflow-hidden relative px-4 py-2 !rounded-xl hover:brightness-150 hover:!border-t-4 hover:!border-b active:opacity-75 outline-none duration-300 group">
          <svg
        x-show="loggingOut"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="mr-2 h-8 w-8 animate-spin"
        x-cloak
        >

        <path d="M21 12a9 9 0 1 1-6.219-8.56" />
        </svg>
  <span

  class="bg-red-400 shadow-red-400 absolute -top-[150%] left-0 inline-flex w-80 h-[5px] rounded-md opacity-50 group-hover:top-[150%] duration-500 shadow-[0_0_10px_10px_rgba(0,0,0,0.3)]"></span>
<span
x-text="loggingOut ? 'Logging Out...' : 'Log Out'"
></span>
</button>
    </div>
    </header>
    <section
    x-show="!playing"
    x-cloak
      class="h-[calc(100vh-60px)] w-full max-w-[150ch] mx-auto py-2 text-white grid items-center gap-8"
    >
      <div class="container px-4 md:px-6">
        <div
          class="flex flex-col md:flex-row items-center md:space-x-4 space-y-4 md:space-y-0 text-center md:text-left"
        >
          <div class="space-y-2">
            <h1
              class="text-4xl text-center font-bold tracking-tighter sm:text-5xl md:text-6xl lg:text-7xl bg-clip-text text-transparent bg-gradient-to-r from-purple-500 via-pink-500 to-red-500"
            >
              Welcome to StackUp Invaders
            </h1>
            <p class="text-2xl italic text-teal-600">The best game for legendary shooters
            </p>
          </div>
          <div class="relative rounded-md w-4/5 lg:w-1/2">
            <img
              src="assets/images/hero.webp"
              alt="Game Channel Image"
              class="hero1 w-full h-full object-cover rounded-md"
              width="500"
              height="500"
              style="aspect-ratio: 500 / 500; object-fit: cover"
            />
            <img
              src="assets/images/hero2.jpg"
              alt="Game Channel Image"
              class="hero2  w-full h-full object-cover rounded-md"
              width="500"
              height="500"
              style="aspect-ratio: 500 / 500; object-fit: cover"
            />
          </div>
        </div>
      </div>

      <!-- Play now button -->
      <div class="space-x-4 text-center mb-2">
        <div class="relative inline-flex group">
          <div
            class="absolute transitiona-all duration-1000 opacity-70 -inset-px bg-gradient-to-r from-[#44BCFF] via-[#FF44EC] to-[#FF675E] rounded-xl blur-lg group-hover:opacity-100 group-hover:-inset-1 group-hover:duration-200 animate-tilt"
          ></div>
          <button
            @click="
        if(!user){
          alert('Please connect your wallet first');
        }
        else {
          playing=true
          window.gameIsStarted = true
        }
        "
            href="#"
            title="Get quote now"
            class="breathing relative inline-flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all duration-200 bg-gray-900 font-pj rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"
            role="button"
          >
            Play Now
          </button>
        </div>
      </div>
    </section>
    <section
    x.cloak
    x.show="playing"
    >

<div
x-cloak
x-show="playing"
    class="container-fluid p-4">
    <div class="flex gap-4">
<div class="alert alert-primary" role="alert">
              Press the spacebar to shoot and arrows to move in all 4 directions!
            </div>
            <div class="alert alert-primary" role="alert">
              Overall Highest Score: <span x-text="highestScore">
              </span>
               <span class="italic text-base text-[#6400ff] font-bold mx-1">(Try to beat the overall highest score)</span>
            </div>
    </div>
      <div class="row">
        <div class="col-6">
          <div class="row">
            <div class="card col-12 pt-2 pb-2 ">
              <div class="">
                <div
                x-cloak
                x-show="playing"
                id="sketch-holder">
                </div>

              </div>

            </div>

          </div>


        </div>
        <div class="col-6">
          <div id="nft">
          </div>
        </div>
      </div>
      <div class="row col-6 text-center flex justify-center my-4">
        <button class="
        start-button
        bg-green-900 text-white !border !border-green-400 !border-b-4 font-medium overflow-hidden relative px-4 py-2 !rounded-xl
         hover:brightness-150 hover:!border-t-4 hover:!border-b active:opacity-75 outline-none duration-300 group">
  <span class="bg-green-400 shadow-green-400 absolute -top-[150%] left-0 inline-flex w-80 h-[5px] rounded-md opacity-50 group-hover:top-[150%] duration-500 shadow-[0_0_10px_10px_rgba(0,0,0,0.3)]"></span>
Start Game
</button>

      </div>
    </div>

    </section>

  </body>


</html>
